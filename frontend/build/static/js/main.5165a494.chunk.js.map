{"version":3,"sources":["set-global.js","api.js","create-fetcher.js","LandingPage.js","history.js","FoodCart-class.js","OrderManage.js","FoodManage.js","DeskManage.js","AddFood.js","AddDesk.js","RestaurantManage.js","Login.js","forget.js","register.js","OrderSuccess.js","App.js","serviceWorker.js","index.js"],"names":["window","axios","baseURL","frontURL","api","create","withCredentials","f","cache","clearCache","read","args","key","join","then","val","fetcher","createFetcher","did","get","catch","error","console","log","DeskInfo","info","data","title","name","withRouter","props","match","params","rid","useState","count","useCount","className","fallback","map","onClick","history","push","createHashHistory","MenuItem","food","onUpdate","amount","updateCount","num","src","img","alt","desc","price","type","theme","CartItem","cart","obj","id","Category","categoryMap","Object","entries","ary","anchorName","anchorElement","document","getElementById","scrollIntoView","go","getTotalPrice","reduce","total","ShoppingCart","order","clearCart","show","setShow","length","MenuInfo","menu","cartChange","category","res","currentAmount","currFoodCartItem","find","cartItem","unshift","ref","createRef","foodWindowRef","FoodCart","socket","emit","desk","foodChange","updated","produce","state","idx","findIndex","it","splice","setState","from","deskName","deskInfo","totalPrice","customCount","customerCount","foods","post","pathname","this","menuObj","categoryMapObj","menuData","forEach","ioUrl","split","io","on","close","Component","orderItemStyle","margin","width","OrderItem","onDelete","orderInfo","setOrder","status","changeStatus","statu","put","style","delete","e","OrderManage","orders","display","flexWrap","FoodItem","setFoods","change","setChange","fd","setFoodData","removeItem","a","newFoods","filter","changeFd","target","value","imgChange","file","files","onChange","size","FormData","append","newFood","updateData","useEffect","to","QRCode","require","deskItemStyle","border","padding","DeskItem","setDeskInfo","setValue","deleteDesk","update","submit","capacity","text","querySelector","toDataURL","err","url","classList","remove","DeskManage","add","foodData","goBack","deskData","setDeskData","dd","userInfoFetcher","RestaurantInfo","mode","height","Item","logout","path","component","FoodManage","AddFood","AddDesk","setName","password","setPassword","dir","alert","response","msg","placeholder","Password","login","email","setEmail","useRef","current","innerHTML","setData","action","method","location","App","exact","Login","LandingPage","OrderSuccess","RestaurantManage","forget","register","Boolean","hostname","ReactDOM","render","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5165a494.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nwindow.axios = axios\r\n// window.baseURL = 'http://localhost:8080/'\r\nwindow.baseURL = 'http://zkylearner.top:8080/'\r\nwindow.frontURL = 'http://zkylearner.top:5000/'\r\n","import axios from 'axios'\r\n\r\nvar api = axios.create({\r\n  // baseURL: 'http://localhost:8080',\r\n  // baseURL: 'http://192.168.137.1:8080',\r\n  baseURL: window.baseURL,\r\n  // 携带证书\r\n  withCredentials: true,\r\n})\r\n\r\nexport default api\r\n","\r\nexport default function(f) {\r\n  var cache = {}\r\n\r\n  return {\r\n    clearCache() {\r\n      cache = {}\r\n    },\r\n    read(...args) {\r\n      var key = args.join('|')\r\n\r\n      if (key in cache) {\r\n        return cache[key]\r\n      } else {\r\n        throw f(...args).then(val => {\r\n          cache[key] = val\r\n        })\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n","import React,{ Suspense, useState } from 'react';\r\nimport { Button } from 'antd'\r\nimport {withRouter} from 'react-router-dom'\r\nimport api from \"./api\"\r\nimport createFetcher from './create-fetcher'\r\nimport './LandingPage.css'\r\n\r\nvar fetcher = createFetcher((did) => {\r\n  return api.get('/deskinfo/' + did)\r\n  .catch(function (error) {\r\n    console.log(error);\r\n  })\r\n})\r\n\r\nfunction DeskInfo({did}) {\r\n  var info = fetcher.read(did).data\r\n  \r\n  return (\r\n    <div>\r\n      <span>{info.title}</span>\r\n      -\r\n      <span>{info.name}</span>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(function(props){\r\n  let {rid, did} = props.match.params\r\n  let [count, useCount] = useState(0)\r\n\r\n  function startOrder() {\r\n    // 路由跳转页面\r\n    props.history.push(`/r/${rid}/d/${did}/c/${count}`)\r\n  }\r\n\r\n  return (\r\n    <div className=\"LandingPage\">\r\n      <div className=\"LandingPageBox\">\r\n        <Suspense fallback={<div>正在加载桌面信息...</div>}>\r\n          <DeskInfo did={did} />\r\n        </Suspense>\r\n        <h2>请选择点餐人数</h2>\r\n        <ul className=\"custom-count\">\r\n          {\r\n            [1,2,3,4,5,6,7,8].map(val => {\r\n              return <li key={val} className={count === val ? 'active': null} onClick={()=>useCount(val)}>{val}</li>\r\n            })\r\n          }\r\n        </ul>\r\n        <Button onClick={startOrder}>开始点餐</Button>\r\n      </div>\r\n    </div>\r\n  )\r\n})","import { createHashHistory } from 'history'\r\n\r\nconst history = createHashHistory()\r\n\r\nexport default history\r\n","import React,{ useState, createRef, Component} from 'react'\r\nimport { Button, Icon } from 'antd'\r\nimport api from './api'\r\nimport history from './history'\r\nimport { produce } from 'immer'\r\nimport io from 'socket.io-client'\r\n\r\nfunction MenuItem({food, onUpdate, amount}){\r\n  function updateCount(food, num){\r\n    if(num === -1 && amount === 0)return\r\n    onUpdate(food, amount + num)\r\n  }\r\n\r\n  return (\r\n    <div className='foodMBox'>\r\n      <img src={window.baseURL + 'upload/' + food.img} alt={food.name}></img>\r\n      <h3>{food.name}</h3>\r\n      <p>{food.desc}</p>\r\n      <footer>\r\n        <span>￥{food.price}</span>\r\n        <span className='counter'>\r\n          {amount > 0 && <Icon type=\"minus-circle\" theme=\"twoTone\" onClick={()=>updateCount(food, -1) } />}\r\n          {amount > 0 && <span>{amount}</span>}\r\n          <Icon type=\"plus-circle\" theme=\"twoTone\" onClick={()=>updateCount(food, 1)} />\r\n        </span>\r\n      </footer>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction CartItem({cart}){\r\n  return (\r\n    cart.map(obj => {\r\n      let {id, name, price} = obj.food\r\n      return (\r\n        <tr key={id}>\r\n          <td>{name}</td>\r\n          <td>{obj.amount}</td>\r\n          <td>{price}</td>\r\n        </tr>\r\n      )\r\n    })\r\n  )\r\n}\r\n\r\nfunction go(anchorName){\r\n  // console.log(anchorName)\r\n  if (anchorName) {\r\n    let anchorElement = document.getElementById(anchorName);\r\n    if(anchorElement) { anchorElement.scrollIntoView() }\r\n  }\r\n}\r\n\r\nfunction Category({categoryMap}){\r\n  return Object.entries(categoryMap).map(ary =>\r\n    <p key={ary[1]} onClick={() => go(ary[1])} >{ary[0]}</p>\r\n  )\r\n}\r\n\r\nfunction getTotalPrice(cart){\r\n  return cart.reduce((total, obj) => {\r\n    return total + obj.food.price * obj.amount\r\n  }, 0)\r\n}\r\n\r\nfunction ShoppingCart({cart, order, clearCart}){\r\n  let [show, setShow] = useState(false)\r\n\r\n  function updateShow(){\r\n    setShow(!show)\r\n    // if(show){\r\n    //   foodWindowRef.current.classList.remove('gray')\r\n    // }else{\r\n    //   foodWindowRef.current.classList.add('gray')\r\n    // }\r\n  }\r\n\r\n  return(\r\n    <div className='ShoppingCart' >\r\n      {show && (cart.length > 0 ? \r\n        <div className='shoppingList' >\r\n          <span className='clearCart' onClick={() => {clearCart();setShow(!show)}} ><Icon type=\"delete\" theme=\"twoTone\"/>清空</span>\r\n          <h3>已选商品</h3>\r\n          <table>\r\n            <tbody>\r\n              <tr>\r\n                <th>名称</th>\r\n                <th>数量</th>\r\n                <th>单价</th>\r\n              </tr>\r\n              <CartItem cart={cart} />\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n        :<p>暂无商品</p>)\r\n      }\r\n      <footer>\r\n        <Button onClick={updateShow} >{show ? '收起' : '展开'}</Button>\r\n        <span>￥{getTotalPrice(cart)}</span>\r\n        <Button className='submit' onClick={() => order()} >下单</Button>\r\n      </footer>\r\n    </div>\r\n  )\r\n}\r\n\r\nfunction MenuInfo({menu, cart, cartChange}){\r\n  return Object.entries(menu).map(ary =>{\r\n    let key = ary[1][0].category\r\n    let res = ary[1].map(food =>{\r\n      var currentAmount = 0\r\n      var currFoodCartItem = cart.find(cartItem => cartItem.food.id === food.id)\r\n      if (currFoodCartItem) {\r\n        currentAmount = currFoodCartItem.amount\r\n      }\r\n      return <MenuItem key={food.id} food={food} amount={currentAmount}\r\n        onUpdate={cartChange} />\r\n    })\r\n    res.unshift(<h3 key={ary[0]} id={ary[0]} >{key}</h3>)\r\n    // console.log(res)\r\n    return res\r\n  })\r\n}\r\n\r\nconst ref = createRef()\r\nconst foodWindowRef = createRef()\r\n\r\nexport default class FoodCart extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      cart: [],\r\n      menu: {},\r\n      deskInfo: {},\r\n      categoryMap: {},\r\n    }\r\n    this.rid = props.match.params.rid\r\n    this.did = props.match.params.did\r\n    this.customerCount = props.match.params.count\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.title = '点餐页面'\r\n    api.get('/deskinfo/' + this.did).then(val => {\r\n      this.setState({\r\n        deskInfo: val.data,\r\n      })\r\n    })\r\n\r\n    api.get(`/restaurant/${this.rid}/food`).then(res => {\r\n      // 菜单分类处理\r\n      let menuObj = {}\r\n      let categoryMapObj = {}\r\n      let menuData = res.data\r\n      let count = 0\r\n      menuData.forEach(food => {\r\n        let key = food.category\r\n        if(!categoryMapObj[key]){\r\n          categoryMapObj[key] = 'category' + ++count\r\n          menuObj[categoryMapObj[key]] = []\r\n        }\r\n        menuObj[categoryMapObj[key]].push(food)\r\n      })\r\n      // console.log(menuObj, categoryMapObj)\r\n      this.setState({\r\n        menu: menuObj,\r\n        categoryMap: categoryMapObj,\r\n      })\r\n    })\r\n\r\n    let ioUrl = 'ws' + window.baseURL.split('http')[1]\r\n    this.socket = io(ioUrl)\r\n\r\n    this.socket.on('connect', () => {\r\n      this.socket.emit('join desk', 'desk:' + this.did)\r\n    })\r\n\r\n    // 后端发回此桌面已点菜单\r\n    this.socket.on('cart food', info => {\r\n      // console.log('cart init', info)\r\n      this.setState(produce(state => {\r\n        state.cart.push(...info)\r\n      }))\r\n    })\r\n\r\n    // 来自同桌其它用户新增的菜单\r\n    this.socket.on('new food', info => {\r\n      // console.log(info)\r\n      this.foodChange(info.food, info.amount)\r\n    })\r\n\r\n    this.socket.on('clear cart', info => {\r\n      this.setState({cart: []})\r\n    })\r\n\r\n    this.socket.on('placeorder success', order => {\r\n      history.push({\r\n        pathname: `/r/${this.rid}/d/${this.did}/order-success`,\r\n        state: order,\r\n      })\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.socket.close()\r\n  }\r\n\r\n  cartChange = (food, amount) => {\r\n    this.socket.emit('new food', {desk: 'desk:' + this.did, food, amount})\r\n  }\r\n\r\n  foodChange = (food, amount) => {\r\n    var updated = produce(this.state.cart, cart => {\r\n      var idx = cart.findIndex(it => it.food.id === food.id)\r\n\r\n      if (idx >= 0) {\r\n        if (amount === 0) {\r\n          cart.splice(idx, 1)\r\n        } else {\r\n          cart[idx].amount = amount\r\n        }\r\n      } else {\r\n        cart.push({\r\n          food,\r\n          amount,\r\n        })\r\n      }\r\n    })\r\n    this.setState({cart: updated})\r\n  }\r\n\r\n  order = () => {\r\n    // console.log('下单')\r\n    let from = {\r\n      deskName: this.state.deskInfo.name,\r\n      totalPrice: getTotalPrice(this.state.cart),\r\n      customCount: this.customerCount,\r\n      foods: this.state.cart,\r\n    }\r\n  \r\n    api.post(`/restaurant/${this.rid}/desk/${this.did}/order`, from)\r\n    .then(res => {\r\n      history.push({\r\n        pathname: `/r/${this.rid}/d/${this.did}/order-success`,\r\n        state: res.data,\r\n      })\r\n    })\r\n  }\r\n\r\n  clearCart = () => {\r\n    this.setState({cart: []})\r\n    this.socket.emit('clear cart', {desk: 'desk:' + this.did})\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='foodWindow' ref={foodWindowRef}>\r\n        <aside>\r\n          <Category categoryMap={this.state.categoryMap} />\r\n        </aside>\r\n        <main ref={ref}>\r\n          <MenuInfo menu={this.state.menu} cart={this.state.cart} cartChange={this.cartChange}></MenuInfo>\r\n        </main>\r\n        <ShoppingCart cart={this.state.cart} order={this.order} clearCart={this.clearCart} />\r\n      </div>\r\n    )\r\n  }\r\n}","import React, { Component, useState } from 'react'\r\nimport io from 'socket.io-client'\r\nimport api from './api'\r\nimport { Button, Card } from 'antd'\r\nimport { produce } from 'immer'\r\n\r\nvar orderItemStyle = {\r\n  margin: '10px',\r\n  width: '320px'\r\n}\r\n\r\nfunction OrderItem({order, onDelete}) {\r\n  let [orderInfo, setOrder] = useState(order)\r\n  let status = ['pending', 'confirmed', 'completed']\r\n\r\n  function changeStatus(statu){\r\n    api.put(`/restaurant/1/order/${order.id}/status`, {\r\n      status: statu\r\n    }).then(() => {\r\n      setOrder({\r\n        ...orderInfo,\r\n        status: statu\r\n      })\r\n    })\r\n  }\r\n\r\n  function deleteOrder() {\r\n    api.delete(`/restaurant/1/order/${order.id}`).then(() => {\r\n      onDelete(order)\r\n    }).catch(e => console.log(e))\r\n  }\r\n\r\n  return (\r\n    <div style={orderItemStyle}>\r\n      <Card title={orderInfo.deskName} >\r\n        <p>总价格：￥{orderInfo.totalPrice}</p>\r\n        <p>人数：{orderInfo.customCount}</p>\r\n        <p>订单状态：{orderInfo.status}</p>\r\n        <div>\r\n          <Button>打印</Button>\r\n          <Button onClick={() => changeStatus(status[1])}>确认</Button>\r\n          <Button onClick={() => changeStatus(status[2])}>完成</Button>\r\n          <Button onClick={deleteOrder}>删除</Button>\r\n        </div>\r\n      </Card>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default class OrderManage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    this.state = {\r\n      orders: []\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n    let ioUrl = 'ws' + window.baseURL.split('http')[1]\r\n    this.socket = io(ioUrl)\r\n\r\n    this.socket.on('new order', order => {\r\n      this.setState(produce(state => {\r\n        state.orders.unshift(order)\r\n      }))\r\n    })\r\n    \r\n    api.get('/restaurant/1/order').then(res => {\r\n      this.setState(produce(state => {\r\n        state.orders = res.data\r\n      }))\r\n    })\r\n  }\r\n\r\n  onDelete = (order) => {\r\n    var idx = this.state.orders.findIndex(it => it.id === order.id)\r\n\r\n    this.setState(produce(state => {\r\n      state.orders.splice(idx, 1)\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div style={{display:'flex', flexWrap:'wrap'}}>\r\n        {this.state.orders.length > 0 ?\r\n          this.state.orders.map(order => {\r\n            return <OrderItem onDelete={this.onDelete} key={order.id} order={order} />\r\n          })\r\n          :\r\n          <div>暂无订单</div>\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}","import React,{useEffect, useState} from 'react'\r\nimport { withRouter, Link } from 'react-router-dom'\r\nimport { Button, Input } from 'antd'\r\nimport api from './api'\r\n\r\nfunction FoodItem({food, obj:{foods,setFoods}}){\r\n  let [change, setChange] = useState(false)\r\n  let [fd, setFoodData] = useState(food)\r\n\r\n  function updateData(){\r\n    var data = new FormData()\r\n    for(var key in fd) {\r\n      var val = fd[key]\r\n      if(val)data.append(key, val)\r\n    }\r\n    api.put(`/restaurant/${food.rid}/food/${food.id}`, data)\r\n    .then(res=>{\r\n      let newFood = res.data\r\n      setFoodData(newFood)\r\n      let newFoods = foods.map(it=>{\r\n        if(it.id === newFood.id){\r\n          return newFood\r\n        }else{\r\n          return it\r\n        }\r\n      })\r\n      setFoods(newFoods)\r\n    })\r\n    .catch(e=>console.log('菜品数据更新错误: ' + e))\r\n    setChange(false)\r\n  }\r\n\r\n  async function removeItem(){\r\n    await api.delete(`/restaurant/${food.rid}/food/${food.id}`)\r\n      .catch(e => console.log(e))\r\n    let newFoods = foods.filter(it=> it.id !== food.id)\r\n    setFoods(newFoods)\r\n  }\r\n\r\n  function changeFd(e) {\r\n    setFoodData({\r\n      ...fd,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  function imgChange(e) {\r\n    let file = e.target.files[0]\r\n    setFoodData({\r\n      ...fd,\r\n      img: file ? file : fd.img,\r\n    })\r\n  }\r\n\r\n  function getContent(){\r\n    if(change){\r\n      // 修改页面\r\n      return(\r\n        <div className='changeFoodPage'>\r\n          <ul>\r\n            <li>名称：<Input type='text' value={fd.name} onChange={changeFd} name='name' /></li>\r\n            <li>价格：<Input type='text' value={fd.price} onChange={changeFd} name='price' /></li>\r\n            <li>分类：<Input type='text' value={fd.category} onChange={changeFd} name='category' /></li>\r\n            <li>描述：<Input type='text' value={fd.desc} onChange={changeFd} name='desc' /></li>\r\n            <li>图片：<input type='file' onChange={imgChange} name='img' /></li>\r\n          </ul>\r\n          <Button size='small' onClick={()=>setFoodData({...fd, status:!fd.status})}>{fd.status ? '下架' : '上架'}</Button>\r\n          <Button size='small' onClick={()=>setChange(!change)}>返回</Button>\r\n          <Button size='small' onClick={()=>updateData()}>保存</Button>\r\n        </div>\r\n      )\r\n    }else{\r\n      // 展示页面\r\n      return(\r\n        <div>\r\n          <img src={window.baseURL + 'upload/' + food.img} alt={food.name}></img>\r\n          <h5>{food.name + (food.status ? '' : \"[以下架]\")}</h5>\r\n          <ul>\r\n            <li>价格：{food.price}</li>\r\n            <li>描述：{food.desc}</li>\r\n            <li>分类：{food.category}</li>\r\n            <li>\r\n              <Button size='small' onClick={() => setChange(!change)}>修改</Button>\r\n              <Button size='small' onClick={ removeItem }>删除</Button>\r\n            </li>\r\n          </ul>\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='foodMBox'>\r\n      { getContent() }\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(function(props){\r\n  let [foods, setFoods] = useState([])\r\n  let rid = props.match.params.rid\r\n\r\n  useEffect(() => {\r\n    // console.log('effect')\r\n    api.get(`/restaurant/${rid}/food`).then(res => {\r\n      setFoods(res.data)\r\n    })\r\n  },[rid])\r\n\r\n  return (\r\n    <div className='foodManage'>\r\n      <Button>\r\n        <Link to={`/restaurant/${rid}/manage/add-food`}>添加菜品</Link>\r\n      </Button>\r\n      <div style={{display:'flex', flexWrap:'wrap'}}>\r\n        {foods.map(food => <FoodItem key={food.id} food={food} obj={ {foods,setFoods} } ></FoodItem> )}\r\n      </div>\r\n    </div>\r\n  )\r\n})","import React, { Component, useState } from 'react'\r\nimport api from './api'\r\nimport { Link } from 'react-router-dom'\r\nimport { Button, Input, Card } from 'antd'\r\nimport { produce } from 'immer'\r\nconst QRCode = require('qrcode')\r\n\r\n// 传入文本，img，转换后的base64直接设置在img标签上\r\nfunction getQR(text, img){\r\n  QRCode.toDataURL(text, function (err, url) {\r\n    // console.log(text, url)\r\n    img.src = url\r\n  })\r\n}\r\n\r\nvar deskItemStyle = {\r\n  border: '2px #e8e8e8 solid',\r\n  width: '280px',\r\n  padding: '5px',\r\n  margin:'10px 5px'\r\n}\r\n\r\nfunction DeskItem({desk, onDelete}) {\r\n\r\n  let [change, setChange] = useState(false)\r\n  let [deskInfo, setDeskInfo] = useState(desk)\r\n  let [value, setValue] = useState({...desk})\r\n\r\n  function deleteDesk() {\r\n    api.delete(`/restaurant/${deskInfo.rid}/desk/${deskInfo.id}`).then(() => {\r\n      onDelete(deskInfo)\r\n    }).catch(e => console.log(e))\r\n  }\r\n\r\n  function update(e) {\r\n    setValue({\r\n      ...value,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  function submit(){\r\n    api.put(`/restaurant/${deskInfo.rid}/desk/${deskInfo.id}`, value)\r\n      .then(res=> {\r\n        setChange(false)\r\n        setDeskInfo(res.data)\r\n      })\r\n      .catch(e => console.log(e))\r\n  }\r\n\r\n  function getContent(){\r\n\r\n    function showQRbox(){\r\n      getQR(`${window.frontURL}#/landing/r/${deskInfo.rid}/d/${deskInfo.id}`, document.querySelector('#QRcode'))\r\n      document.querySelector('.QRcodeBox').classList.remove('hidden')\r\n    }\r\n\r\n    if(change){\r\n      return (\r\n        <div style={deskItemStyle}>\r\n          <ul>\r\n            <li>桌面名称：<Input type='text' name='name' value={value.name} onChange={update}/> </li>\r\n            <li>容纳人数：<Input type='number' name='capacity' value={value.capacity} onChange={update} /> </li>\r\n          </ul>\r\n          <Button onClick={() => {setChange(false)}}>返回</Button>\r\n          <Button onClick={submit}>提交</Button>\r\n        </div>\r\n      )\r\n    }else{\r\n      return (\r\n        <Card title={deskInfo.name} style={{margin:'10px 5px', width:'280px'}}>\r\n          <p>容纳人数：{deskInfo.capacity}</p>\r\n          <div>\r\n            <Button onClick={showQRbox}>二维码</Button>\r\n            <Button onClick={() => {setChange(true)}}>修改</Button>\r\n            <Button onClick={deleteDesk}>删除</Button>\r\n          </div>\r\n        </Card>\r\n      )\r\n    }\r\n  }\r\n\r\n  return getContent()\r\n}\r\n\r\nexport default class DeskManage extends Component {\r\n  constructor(props) {\r\n    super(props)\r\n    this.state = {\r\n      desk: []\r\n    }\r\n\r\n    this.rid = props.match.params.rid\r\n  }\r\n\r\n  componentDidMount(){\r\n    api.get(`/restaurant/${this.rid}/desk`).then(res => {\r\n      this.setState(produce(state => {\r\n        state.desk = res.data\r\n      }))\r\n    })\r\n  }\r\n\r\n  onDelete = (desk) => {\r\n    var idx = this.state.desk.findIndex(it => it.id === desk.id)\r\n    this.setState(produce(state => {\r\n      state.desk.splice(idx, 1)\r\n    }))\r\n  }\r\n\r\n  render() {\r\n    return(\r\n      <div style={{margin:'10px'}}>\r\n        <Button>\r\n          <Link to={`/restaurant/${this.rid}/manage/add-desk`}>添加桌面</Link>\r\n        </Button>\r\n        <div style={{display:'flex', flexWrap:'wrap'}}>\r\n          {this.state.desk.length > 0 ?\r\n            this.state.desk.map(desk => {\r\n              return <DeskItem onDelete={this.onDelete} key={desk.id} desk={desk} />\r\n            })\r\n            :\r\n            <div>暂无桌面</div>\r\n          }\r\n        </div>\r\n        <div className='QRcodeBox hidden'>\r\n          <img id='QRcode' alt='QRcode' />\r\n          <Button onClick={()=>{document.querySelector('.QRcodeBox').classList.add('hidden')}}>确认</Button>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}","import React, {useState} from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport api from './api'\r\nimport history from './history'\r\n\r\nexport default withRouter(function AddFood(props){\r\n  let rid = props.match.params.rid\r\n\r\n  let [foodData, setFoodData] = useState({\r\n    rid,\r\n    name: '',\r\n    price: 0,\r\n    status: '1',\r\n    desc: '',\r\n    category: '',\r\n    img: 'default.jpg',\r\n  })\r\n\r\n  function change(e) {\r\n    setFoodData({\r\n      ...foodData,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  function imgChange(e) {\r\n    let file = e.target.files[0]\r\n    setFoodData({\r\n      ...foodData,\r\n      img: file ? file : foodData.img,\r\n    })\r\n  }\r\n\r\n  function submit(e) {\r\n    var fd = new FormData()\r\n    for(var key in foodData) {\r\n      var val = foodData[key]\r\n      if(val)fd.append(key, val)\r\n    }\r\n\r\n    api.post(`/restaurant/${rid}/food`, fd)\r\n      .then(res => {\r\n        history.goBack()\r\n      }).catch(e=> console.log(e))\r\n  }\r\n\r\n  return(\r\n    <div className='addFoodCard'>\r\n      <h3>添加菜品</h3>\r\n      <ul>\r\n        <li>名称：<input type='text' onChange={change} name=\"name\" /></li>\r\n        <li>价格：<input type='text' onChange={change} name=\"price\" /></li>\r\n        <li>分类：<input type='text' onChange={change} name=\"category\" /></li>\r\n        <li>描述：<input type='text' onChange={change} name=\"desc\" /></li>\r\n        <li>图片：<input type='file' onChange={imgChange} name=\"img\" /></li>\r\n      </ul>\r\n      <button onClick={() => {history.push(`/restaurant/${rid}/manage/food` ) }}>返回</button>\r\n      <button onClick={submit}>提交</button>\r\n    </div>\r\n  )\r\n})\r\n","import React, {useState} from 'react'\r\nimport { withRouter } from 'react-router-dom'\r\nimport api from './api'\r\nimport history from './history'\r\n\r\nexport default withRouter(function AddFood(props){\r\n  let rid = props.match.params.rid\r\n\r\n  let [deskData, setDeskData] = useState({\r\n    rid,\r\n    name: '',\r\n    capacity: 0,\r\n  })\r\n\r\n  function change(e) {\r\n    setDeskData({\r\n      ...deskData,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  function submit(e) {\r\n    var dd = {}\r\n    for(var key in deskData) {\r\n      var val = deskData[key]\r\n      if(val)dd[key] = val\r\n    }\r\n\r\n    api.post(`/restaurant/${rid}/desk`, dd)\r\n      .then(res => {\r\n        history.goBack()\r\n      }).catch(e=> console.log(e))\r\n  }\r\n\r\n  return(\r\n    <div className='addFoodCard'>\r\n      <h3>添加桌面</h3>\r\n      <ul>\r\n        <li>名称：<input type='text' onChange={change} name=\"name\" /></li>\r\n        <li>容纳人数：<input type='number' onChange={change} name=\"capacity\" /></li>\r\n      </ul>\r\n      <button onClick={() => {history.goBack()}}>返回</button>\r\n      <button onClick={submit}>提交</button>\r\n    </div>\r\n  )\r\n})\r\n","import React, { Suspense } from 'react'\r\nimport { Switch, Link, Route, withRouter } from 'react-router-dom'\r\nimport OrderManage from './OrderManage'\r\nimport FoodManage from './FoodManage'\r\nimport DeskManage from './DeskManage'\r\nimport AddFood from './AddFood'\r\nimport AddDesk from './AddDesk'\r\nimport api from './api'\r\nimport createFetcher from './create-fetcher'\r\nimport history from './history'\r\nimport { Menu } from 'antd';\r\n\r\nconst userInfoFetcher = createFetcher(async () => {\r\n  return api.get('/userinfo')\r\n  .catch((e) => {\r\n    console.log(e)\r\n    // window.history.hash = '/'\r\n    history.push('/')\r\n  })\r\n})\r\n\r\nfunction RestaurantInfo(){\r\n  var info = userInfoFetcher.read().data\r\n  return(\r\n    <div className='show-area-title'>\r\n      <h3>{info && info.title}</h3>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default withRouter(function(props){\r\n  async function logout() {\r\n    await api.get('/logout')\r\n    userInfoFetcher.clearCache()\r\n    props.history.push('/')\r\n  }\r\n\r\n  return (\r\n    <div className='show-area'>\r\n      <Suspense fallback={<div>loading...</div>}>\r\n        <RestaurantInfo />\r\n      </Suspense>\r\n      <div className='show-area-content'>\r\n        <aside>\r\n          <Menu mode=\"inline\" style={{height:'100%', width:'150px'}}>\r\n            <Menu.Item key=\"order\">\r\n              <Link to='order'>订单管理</Link>\r\n            </Menu.Item>\r\n            <Menu.Item key=\"food\">\r\n              <Link to='food'>菜品管理</Link>\r\n            </Menu.Item>\r\n            <Menu.Item key=\"desk\">\r\n              <Link to='desk'>桌面管理</Link>\r\n            </Menu.Item>\r\n            <Menu.Item key=\"exit\">\r\n              <span onClick={()=>logout()}>退出</span>\r\n            </Menu.Item>\r\n          </Menu>\r\n        </aside>\r\n        <main>\r\n          <Switch>\r\n            <Route path=\"/restaurant/:rid/manage/order\" component={OrderManage}/>\r\n            <Route path=\"/restaurant/:rid/manage/food\" component={FoodManage}/>\r\n            <Route path=\"/restaurant/:rid/manage/desk\" component={DeskManage}/>\r\n            <Route path=\"/restaurant/:rid/manage/add-food\" component={AddFood}/>\r\n            <Route path=\"/restaurant/:rid/manage/add-desk\" component={AddDesk}/>\r\n          </Switch>\r\n        </main>\r\n      </div>\r\n    </div>\r\n  )\r\n})","import React,{useState} from 'react';\r\nimport { Button, Input } from 'antd';\r\nimport api from './api'\r\nimport {withRouter, Link} from 'react-router-dom'\r\n\r\nexport default withRouter(function(props){\r\n  let [name,setName] = useState()\r\n  let [password,setPassword] = useState()\r\n\r\n  async function login(e){\r\n    try{\r\n      let res = await api.post('/login', {name, password})\r\n      props.history.push(`/restaurant/${res.data.id}/manage/order`)\r\n    }catch(e){\r\n      console.dir(e)\r\n      alert(e.response.data.msg)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className='login'>\r\n      <h2>餐厅后台管理</h2>\r\n      <Input name='name' placeholder='用户名' onChange={(e) => setName(e.target.value)}/>\r\n      <Input.Password name='password' placeholder='密码' onChange={(e) => setPassword(e.target.value)} />\r\n      <Button type=\"primary\" onClick={(e)=>login(e)}>登陆</Button>\r\n      <Link to='/forget' className='forgetLink' >忘记密码</Link>\r\n      <Link to='/register' className='registerLink' >注册</Link>\r\n    </div>\r\n  )\r\n})","import React,{useState, useRef} from 'react'\r\nimport { Button, Input } from 'antd'\r\nimport api from './api'\r\nimport history from './history'\r\n\r\nexport default function(){\r\n  let [email, setEmail] = useState({})\r\n  const ref = useRef()\r\n\r\n  function submit(){\r\n    // console.log(email)\r\n    api.post('/forget', email)\r\n      .then(res => {\r\n        // console.log(res)\r\n        ref.current.innerHTML = res.data\r\n      })\r\n  }\r\n\r\n  return (\r\n    <div className='forgetPage'>\r\n      <h3>邮箱验证</h3>\r\n      <Input\r\n        type=\"text\" name=\"email\"\r\n        placeholder='请输入您的邮箱' \r\n        onChange={(e) => setEmail({email: e.target.value})}\r\n      />\r\n      <Button onClick={submit} >确认</Button>\r\n      <Button onClick={() => {history.push('/')}} >返回</Button>\r\n      <p ref={ref}></p>\r\n    </div>\r\n  )\r\n}","import React,{useState} from 'react'\r\nimport { Input, Button } from 'antd'\r\nimport history from './history'\r\nimport api from './api'\r\n\r\nexport default function(){\r\n  let [data, setData] = useState({\r\n\r\n  })\r\n\r\n  function back(){\r\n    history.push('/')\r\n  }\r\n\r\n  function register(){\r\n    console.log(data)\r\n    api.post('/register', data)\r\n      .then(res => {\r\n        history.push('/')\r\n      })\r\n  }\r\n\r\n  function change(e) {\r\n    setData({\r\n      ...data,\r\n      [e.target.name]: e.target.value\r\n    })\r\n  }\r\n\r\n  return (\r\n    <div className='register'>\r\n      <h1>管理员注册</h1>\r\n      <form action = \"/register\" method = \"post\">\r\n        <Input type=\"text\" placeholder='用户名' name=\"name\" value={data.name} onChange={change} />\r\n        <Input type=\"text\" placeholder='邮箱' name=\"email\" value={data.email} onChange={change} />\r\n        <Input type=\"password\" placeholder='密码' name=\"password\" value={data.password} onChange={change} />\r\n        <Input type=\"text\" placeholder='餐馆名称' name=\"title\" value={data.title} onChange={change} />\r\n        <Button onClick={register} >注册</Button><Button onClick={back}>返回主页</Button>\r\n      </form>\r\n    </div>\r\n  )\r\n}","import React from \"react\";\r\n\r\n\r\nexport default function(props) {\r\n  console.log(props)\r\n\r\n  return (\r\n    <div>\r\n      <h2>下单成功</h2>\r\n      <p>总价：{props.location.state && props.location.state.totalPrice}</p>\r\n    </div>\r\n  )\r\n}\r\n","import React from 'react';\nimport './App.css';\nimport { Router, Route, Switch } from 'react-router-dom';\nimport LandingPage from './LandingPage';\nimport FoodCart from './FoodCart-class';\nimport RestaurantManage from './RestaurantManage';\nimport Login from './Login';\nimport forget from './forget';\nimport register from './register';\nimport OrderSuccess from './OrderSuccess'\nimport history from './history'\n\nfunction App() {\n  return (\n    <Router history={history}>\n        <Switch>\n          {/* <Route path=\"/\" exact component={HomePage} /> */}\n          <Route path=\"/\" exact component={Login} />\n          <Route path=\"/landing/r/:rid/d/:did\" component={LandingPage} />\n          <Route path=\"/r/:rid/d/:did/c/:count\" component={FoodCart} />\n          <Route path=\"/r/:rid/d/:did/order-success\" component={OrderSuccess} />\n          \n          <Route path=\"/restaurant/:rid/manage\" component={RestaurantManage} />\n          <Route path=\"/forget\" component={forget} />\n          <Route path=\"/register\" component={register} />\n        </Switch>\n    </Router>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './set-global'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.unregister();\n"],"sourceRoot":""}